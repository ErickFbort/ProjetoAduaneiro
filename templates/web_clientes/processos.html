{% extends "base.html" %}

{% block title %}Processos - Web Cliente{% endblock %}

{% block body_class %}main-body{% endblock %}

{% block content %}
{% include 'partials/sidebar.html' %}

<main class="content main-content--shifted">
    <div class="content-section active">
        <div class="container-fluid">
            <!-- Header da página -->
            <div class="page-header">
                <div class="header-content">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-clipboard-list fa-2x text-white me-3"></i>
                        <div class="header-text">
                            <h2>Listagem de Processos</h2>
                            <p class="page-subtitle">Gerencie e acompanhe todos os processos aduaneiros</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Barra de Pesquisa e Filtros -->
            <div class="search-section">
                <div class="search-input-group">
                    <form method="GET" class="search-form">
                        <div class="input-group">
                            <input type="text" 
                                   name="search" 
                                   id="searchInput"
                                   class="form-control search-input" 
                                   placeholder="Pesquisar por cliente, protocolo, requisição, referência...">
                            <button type="submit" class="btn btn-primary search-btn" id="searchBtn">
                                <i class="fas fa-search"></i>
                            </button>
                            <button type="button" class="btn btn-outline-secondary clear-btn" id="clearFilters">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </form>
                    <button class="btn btn-outline-info filter-toggle" onclick="toggleAdvancedFilters()">
                        <i class="fas fa-filter"></i> Filtros Avançados
                    </button>
                    <button class="btn btn-success" id="cadastrarProcesso">
                        <i class="fas fa-plus"></i> Cadastrar Processo
                    </button>
                </div>

                <!-- Filtros Avançados -->
                <div class="advanced-filters" id="advancedFilters" style="display: none;">
                    <div class="filters-header">
                        <h5>Filtros</h5>
                    </div>
                    <form method="GET" class="filters-form">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Status</label>
                                        <select name="status" id="statusFilter" class="form-select">
                                            <option value="">Selecione...</option>
                                            <option value="APROVADO">Aprovado</option>
                                            <option value="CANCELADO">Cancelado</option>
                                            <option value="CARGA ENTREGUE">Carga Entregue</option>
                                            <option value="EM ABERTO">Em Aberto</option>
                                            <option value="ENCERRADO">Encerrado</option>
                                            <option value="PENDENCIA DOCUMENTAL">Pendência Documental</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Regime</label>
                                        <select name="regime" id="regimeFilter" class="form-select">
                                            <option value="">Selecione...</option>
                                            <option value="EXPORTACAO">Exportação</option>
                                            <option value="IMPORTACAO">Importação</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Despachante</label>
                                        <input type="text" name="despachante" id="despachanteFilter" class="form-control" placeholder="Despachante">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Cliente</label>
                                        <input type="text" name="cliente" id="clienteFilter" class="form-control" placeholder="Cliente">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Requisição</label>
                                        <input type="text" name="requisicao" id="requisicaoFilter" class="form-control" placeholder="Requisição">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Protocolo</label>
                                        <input type="text" name="protocolo" id="protocoloFilter" class="form-control" placeholder="Protocolo">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Natureza Operação</label>
                                        <select name="natureza_operacao" id="naturezaOperacaoFilter" class="form-select">
                                            <option value="">Selecione...</option>
                                            <option value="05.03">05.03 - Despacho De Exportacao - Aereo</option>
                                            <option value="05.01">05.01 - Despacho De Exportacao - Maritimo</option>
                                            <option value="05.02">05.02 - Despacho De Exportacao - Rodoviario</option>
                                            <option value="01.01">01.01 - Despacho De Importacao - Aereo</option>
                                            <option value="01.02">01.02 - Despacho De Importacao - Maritimo</option>
                                            <option value="01.03">01.03 - Despacho De Importacao - Rodoviario</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Referência Cliente</label>
                                        <input type="text" name="referencia_cliente" id="referenciaClienteFilter" class="form-control" placeholder="Referência Cliente">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">AWB</label>
                                        <input type="text" name="awb" id="awbFilter" class="form-control" placeholder="AWB">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">HAWB</label>
                                        <input type="text" name="hawb" id="hawbFilter" class="form-control" placeholder="HAWB">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Núm. Documento LIb</label>
                                        <input type="text" name="num_documento_lib" id="numDocumentoLibFilter" class="form-control" placeholder="Núm. Documento LIb">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Data Cadastro de</label>
                                        <input type="date" name="data_cadastro_de" id="dataCadastroDeFilter" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Data Cadastro até</label>
                                        <input type="date" name="data_cadastro_ate" id="dataCadastroAteFilter" class="form-control">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Placa</label>
                                        <input type="text" name="placa" id="placaFilter" class="form-control" placeholder="Placa">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Data Saída</label>
                                        <input type="date" name="data_saida" id="dataSaidaFilter" class="form-control" placeholder="Data Saída">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-secondary" onclick="clearAdvancedFilters()">
                                        <i class="fas fa-eraser"></i> Limpar Pesquisa
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-search"></i> Pesquisar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Ações da Tabela -->
            <div class="table-actions">
                <div class="actions-left">
                    <button type="button" class="btn btn-outline-secondary" onclick="refreshTable()" title="Atualizar">
                        <i class="fas fa-sync-alt"></i> Atualizar
                    </button>
                </div>
                <div class="actions-right">
                    <div class="items-per-page-container">
                        <span class="items-label">Itens por página:</span>
                        <select class="form-select items-select" id="itemsPorPagina">
                            <option value="10">10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Tabela de Processos -->
            <div class="table-container">
                <div class="table-responsive">
                    <table class="table table-hover processos-table" id="processosTable">
                        <thead class="table-header">
                            <tr>
                                <th width="5%">Status</th>
                                <th width="10%">Impo / Expo</th>
                                <th width="8%">Pendências</th>
                                <th width="8%">Carga</th>
                                <th width="10%">Requisição</th>
                                <th width="10%">Protocolo</th>
                                <th width="10%">Criado</th>
                                <th width="10%">Atualizado</th>
                                <th width="8%">Referência</th>
                                <th width="12%">Cliente</th>
                                <th width="10%">Despachante</th>
                                <th width="8%">AWB</th>
                                <th width="8%">HAWB</th>
                                <th width="5%">DI</th>
                                <th width="5%">DTA</th>
                                <th width="5%">NFE</th>
                                <th width="8%">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="processosTableBody">
                            <!-- Dados serão carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Estado vazio -->
                <div class="empty-state d-none" id="emptyState">
                    <i class="fas fa-clipboard-list fa-4x text-muted mb-3"></i>
                    <h5>Nenhum processo encontrado</h5>
                    <p>Não há processos que correspondam aos critérios de busca.</p>
                    <button class="btn btn-primary" id="clearFiltersEmpty">
                        <i class="fas fa-refresh"></i> Limpar Filtros
                    </button>
                </div>
            </div>

            <!-- Paginação -->
            <nav aria-label="Navegação de páginas" class="mt-4">
                <ul class="pagination justify-content-center" id="pagination">
                    <!-- Paginação será gerada via JavaScript -->
                </ul>
            </nav>
        </div>
    </div>
</main>

<!-- Modal de Cadastro de Processo -->
<div class="modal fade" id="cadastroProcessoModal" tabindex="-1" aria-labelledby="cadastroProcessoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="cadastroProcessoModalLabel">
                    <i class="fas fa-arrow-left me-2" onclick="fecharCadastroProcesso()"></i>
                    Cadastro de Processo
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Navegação por Abas -->
                <div class="cadastro-tabs">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="processo">
                            <i class="fas fa-clipboard-list"></i> Processo
                        </button>
                        <button class="tab-btn" data-tab="historico">
                            <i class="fas fa-history"></i> Histórico
                        </button>
                    </div>
                </div>

                <!-- Conteúdo das Abas -->
                <div class="tab-content">
                    <!-- Aba Processo (Todas as informações) -->
                    <div class="tab-pane active" id="processo-tab">
                        <div class="form-section">
                            <h6 class="section-title">Detalhes</h6>
                            <form id="cadastroProcessoForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="despachanteCadastro" class="form-label required">Despachante / Responsável</label>
                                            <input type="text" 
                                                   class="form-control" 
                                                   id="despachanteCadastro" 
                                                   placeholder="Digite 3 ou mais caracteres para pesquisar o DESPACHANTE"
                                                   required>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="clienteCadastro" class="form-label required">Cliente / Consignatário</label>
                                            <input type="text" 
                                                   class="form-control" 
                                                   id="clienteCadastro" 
                                                   placeholder="Digite 3 ou mais caracteres para pesquisar o CLIENTE / CONSIGNATÁRIO"
                                                   required>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="naturezaOperacaoCadastro" class="form-label required">Natureza de Operação</label>
                                            <select class="form-select" id="naturezaOperacaoCadastro" required>
                                                <option value="">Selecione...</option>
                                                <option value="05.03">05.03 - Despacho De Exportacao - Aereo</option>
                                                <option value="05.01">05.01 - Despacho De Exportacao - Maritimo</option>
                                                <option value="05.02">05.02 - Despacho De Exportacao - Rodoviario</option>
                                                <option value="01.01">01.01 - Despacho De Importacao - Aereo</option>
                                                <option value="01.02">01.02 - Despacho De Importacao - Maritimo</option>
                                                <option value="01.03">01.03 - Despacho De Importacao - Rodoviario</option>
                                                <option value="05.04">05.04 - Despacho De Exportacao - Aereo Via Dta</option>
                                                <option value="05.05">05.05 - Devolucao De Madeira Para Exterior</option>
                                                <option value="05.06">05.06 - Despacho De Importacao - Aereo Dsi</option>
                                                <option value="05.08">05.08 - Operacao Courier</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="tabelaAplicada" class="form-label required">Tabela a ser aplicada</label>
                                            <select class="form-select" id="tabelaAplicada" required>
                                                <option value="">Selecione...</option>
                                                <option value="tabela1">Tabela 1 - Exportação Aérea</option>
                                                <option value="tabela2">Tabela 2 - Exportação Marítima</option>
                                                <option value="tabela3">Tabela 3 - Exportação Rodoviária</option>
                                                <option value="tabela4">Tabela 4 - Importação Aérea</option>
                                                <option value="tabela5">Tabela 5 - Importação Marítima</option>
                                                <option value="tabela6">Tabela 6 - Importação Rodoviária</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="dataPontoZeroCadastro" class="form-label">Data (Ponto Zero)</label>
                                            <input type="date" class="form-control" id="dataPontoZeroCadastro">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="referenciaClienteCadastro" class="form-label">Referência do Cliente</label>
                                            <input type="text" 
                                                   class="form-control" 
                                                   id="referenciaClienteCadastro" 
                                                   placeholder="Referência do cliente">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="previsaoCarregamentoCadastro" class="form-label">Previsão Carregamento</label>
                                            <input type="date" class="form-control" id="previsaoCarregamentoCadastro">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="form-group">
                                            <label for="observacaoCadastro" class="form-label">Observação</label>
                                            <textarea class="form-control" 
                                                      id="observacaoCadastro" 
                                                      rows="3" 
                                                      placeholder="Observação"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="reexportacaoCadastro" class="form-label">Reexportação</label>
                                            <select class="form-select" id="reexportacaoCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="sim">Sim</option>
                                                <option value="nao">Não</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="receberGuiasCadastro" class="form-label required">Receber Guias E-mail</label>
                                            <select class="form-select" id="receberGuiasCadastro" required>
                                                <option value="">Selecione...</option>
                                                <option value="sim">Sim</option>
                                                <option value="nao">Não</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="emailGuiasCadastro" class="form-label">E-mail Guias</label>
                                            <input type="email" 
                                                   class="form-control" 
                                                   id="emailGuiasCadastro" 
                                                   placeholder="E-mail Guia">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="impedimentoCargaCadastro" class="form-label">Impedimento da Carga</label>
                                            <select class="form-select" id="impedimentoCargaCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="sim">Sim</option>
                                                <option value="nao">Não</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="statusFaturamentoCadastro" class="form-label">Status Faturamento</label>
                                            <select class="form-select" id="statusFaturamentoCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="pendente">Pendente</option>
                                                <option value="processando">Processando</option>
                                                <option value="faturado">Faturado</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="form-group">
                                            <label for="observacaoInternaCadastro" class="form-label">Observação Interna</label>
                                            <textarea class="form-control" 
                                                      id="observacaoInternaCadastro" 
                                                      rows="3" 
                                                      placeholder="Observação Interna"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-4 d-flex flex-column align-items-end">
                                        <button type="button" class="btn btn-primary btn-salvar mb-2">
                                            <i class="fas fa-save"></i> Salvar
                                        </button>
                                        <button type="button" class="btn btn-warning btn-solicitar-faturamento mb-2">
                                            <i class="fas fa-file-invoice-dollar"></i> Solicitar Faturamento
                                        </button>
                                        <button type="button" class="btn btn-secondary" id="descartarAlteracoesCadastro">
                                            <i class="fas fa-times"></i> Descartar Alterações
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Seção Documentos -->
                        <div class="form-section">
                            <h6 class="section-title">Documentos</h6>
                            
                            <!-- Lista de Documentos -->
                            <div id="documentosLista" class="documentos-container" style="display: none;">
                                <div class="documentos-layout">
                                    <!-- Lista de Documentos (Lado Esquerdo) -->
                                    <div class="documentos-sidebar">
                                        <div class="documentos-list" id="documentosList">
                                            <!-- Documentos serão carregados dinamicamente -->
                                        </div>
                                    </div>
                                    
                                    <!-- Detalhes do Documento (Lado Direito) -->
                                    <div class="documentos-details" id="documentosDetails">
                                        <div class="documento-placeholder">
                                            <i class="fas fa-file-alt fa-3x text-muted mb-3"></i>
                                            <h6 class="text-muted">Selecione um documento para visualizar os detalhes</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Seção Carga -->
                        <div class="form-section">
                            <h6 class="section-title">Carga</h6>
                            <form id="cargaForm">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="regimeAduaneiroCadastro" class="form-label">Regime Aduaneiro</label>
                                            <select class="form-select" id="regimeAduaneiroCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="exportacao_definitiva">Exportação Definitiva</option>
                                                <option value="exportacao_temporaria">Exportação Temporária</option>
                                                <option value="importacao_definitiva">Importação Definitiva</option>
                                                <option value="importacao_temporaria">Importação Temporária</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="objetivoImportacaoCadastro" class="form-label">Objetivo da Importação/Exportação</label>
                                            <select class="form-select" id="objetivoImportacaoCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="comercial">Comercial</option>
                                                <option value="industrial">Industrial</option>
                                                <option value="pessoal">Pessoal</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="tipoCargaCadastro" class="form-label">Tipo da Carga</label>
                                            <select class="form-select" id="tipoCargaCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="geral">Carga Geral</option>
                                                <option value="granel">Granel</option>
                                                <option value="perigosa">Perigosa</option>
                                                <option value="refrigerada">Refrigerada</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="imoDgrCadastro" class="form-label">IMO / DGR</label>
                                            <select class="form-select" id="imoDgrCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="nao">Não</option>
                                                <option value="sim">Sim</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="volumeCadastro" class="form-label">Volume</label>
                                            <input type="number" class="form-control" id="volumeCadastro" placeholder="Volume" step="0.01">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="pesoBrutoCadastro" class="form-label">Peso Bruto</label>
                                            <input type="number" class="form-control" id="pesoBrutoCadastro" placeholder="Peso Bruto" step="0.00001">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="valorCifCadastro" class="form-label">Valor CIF</label>
                                            <input type="number" class="form-control" id="valorCifCadastro" value="0,00" step="0.01">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="valorFreteCadastro" class="form-label">Valor Frete</label>
                                            <input type="number" class="form-control" id="valorFreteCadastro" value="0,00" step="0.01">
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="valorSeguroCadastro" class="form-label">Valor Seguro</label>
                                            <input type="number" class="form-control" id="valorSeguroCadastro" value="0,00" step="0.01">
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="valorFobCadastro" class="form-label">Valor Fob</label>
                                            <input type="number" class="form-control" id="valorFobCadastro" value="0,00" step="0.01">
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="moedaFreteCadastro" class="form-label">Moeda Frete</label>
                                            <select class="form-select" id="moedaFreteCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="USD">USD - Dólar Americano</option>
                                                <option value="EUR">EUR - Euro</option>
                                                <option value="BRL">BRL - Real Brasileiro</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="moedaSeguroCadastro" class="form-label">Moeda Seguro</label>
                                            <select class="form-select" id="moedaSeguroCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="USD">USD - Dólar Americano</option>
                                                <option value="EUR">EUR - Euro</option>
                                                <option value="BRL">BRL - Real Brasileiro</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="moedaFobCadastro" class="form-label">Moeda FOB</label>
                                            <select class="form-select" id="moedaFobCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="USD">USD - Dólar Americano</option>
                                                <option value="EUR">EUR - Euro</option>
                                                <option value="BRL">BRL - Real Brasileiro</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="embalagemMadeiraCadastro" class="form-label">Embalagem / Suporte de Madeira?</label>
                                            <select class="form-select" id="embalagemMadeiraCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="nao">Não</option>
                                                <option value="sim">Sim</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="controleTemperaturaCadastro" class="form-label">Controle de Temperatura?</label>
                                            <select class="form-select" id="controleTemperaturaCadastro">
                                                <option value="">Selecione...</option>
                                                <option value="nao">Não</option>
                                                <option value="sim">Sim</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            
                            <!-- Seção Adições -->
                            <div class="adicoes-section">
                                <h6 class="section-title">Adições</h6>
                                <div class="table-responsive">
                                    <table class="table table-sm adicoes-table">
                                        <thead>
                                            <tr>
                                                <th width="5%">#</th>
                                                <th width="15%">Regime Aduaneiro</th>
                                                <th width="20%">Detalhamento da Carga</th>
                                                <th width="15%">Objetivo Imp/Exp</th>
                                                <th width="10%">Reimportação</th>
                                                <th width="10%">Valor CIF</th>
                                                <th width="10%">Moeda</th>
                                                <th width="10%">Peso Líquido</th>
                                                <th width="5%">Opções</th>
                                            </tr>
                                        </thead>
                                        <tbody id="adicoesTableBodyCadastro">
                                            <tr>
                                                <td colspan="9" class="text-center text-muted">Nenhuma adição para a carga</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Aba Histórico -->
                    <div class="tab-pane" id="historico-tab">
                        <div class="form-section">
                            <h6 class="section-title">Histórico</h6>
                            <div class="text-center text-muted">
                                <i class="fas fa-history fa-3x mb-3"></i>
                                <p>Nenhum histórico disponível para este processo.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <!-- Botões movidos para a seção de Observação Interna -->
            </div>
        </div>
    </div>
</div>

<!-- Modal de Visualização/Edição de Processo -->
<div class="modal fade" id="processoModal" tabindex="-1" aria-labelledby="processoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="processoModalLabel">
                    <i class="fas fa-arrow-left me-2"></i>
                    Alteração / Visualização do Processo - <span id="processoProtocolo"></span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Detalhes do Processo -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0">Detalhes</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="despachante" class="form-label">Despachante / Responsável *</label>
                                    <input type="text" class="form-control" id="despachante" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="cliente" class="form-label">Cliente / Consignatário *</label>
                                    <input type="text" class="form-control" id="cliente" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="naturezaOperacao" class="form-label">Natureza de Operação *</label>
                                    <select class="form-select" id="naturezaOperacao">
                                        <option value="">Selecione...</option>
                                        <option value="05.03">05.03 - Despacho De Exportacao - Aereo</option>
                                        <option value="05.01">05.01 - Despacho De Exportacao - Maritimo</option>
                                        <option value="05.02">05.02 - Despacho De Exportacao - Rodoviario</option>
                                        <option value="01.01">01.01 - Despacho De Importacao - Aereo</option>
                                        <option value="01.02">01.02 - Despacho De Importacao - Maritimo</option>
                                        <option value="01.03">01.03 - Despacho De Importacao - Rodoviario</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="dataPontoZero" class="form-label">Data (Ponto Zero)</label>
                                    <input type="date" class="form-control" id="dataPontoZero">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="referenciaCliente" class="form-label">Referência do Cliente</label>
                                    <input type="text" class="form-control" id="referenciaCliente">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="previsaoCarregamento" class="form-label">Previsão Carregamento</label>
                                    <input type="date" class="form-control" id="previsaoCarregamento">
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="observacao" class="form-label">Observação</label>
                                    <textarea class="form-control" id="observacao" rows="2" placeholder="Observação"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="reexportacao" class="form-label">Reexportação</label>
                                    <select class="form-select" id="reexportacao">
                                        <option value="">Selecione...</option>
                                        <option value="sim">Sim</option>
                                        <option value="nao">Não</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="impedimentoCarga" class="form-label">Impedimento da Carga</label>
                                    <select class="form-select" id="impedimentoCarga">
                                        <option value="">Selecione...</option>
                                        <option value="sim">Sim</option>
                                        <option value="nao">Não</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="receberGuias" class="form-label">Receber Guias E-mail*</label>
                                    <select class="form-select" id="receberGuias">
                                        <option value="nao">Não</option>
                                        <option value="sim">Sim</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="emailGuias" class="form-label">E-mail Guias</label>
                                    <input type="email" class="form-control" id="emailGuias" placeholder="E-mail Guia">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="mb-3">
                                    <label for="observacaoInterna" class="form-label">Observação Interna</label>
                                    <textarea class="form-control" id="observacaoInterna" rows="3" placeholder="Observação Interna"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Carga -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0">Carga</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="regimeAduaneiro" class="form-label">Regime Aduaneiro</label>
                                    <select class="form-select" id="regimeAduaneiro">
                                        <option value="">Selecione...</option>
                                        <option value="exportacao_definitiva">Exportação Definitiva</option>
                                        <option value="exportacao_temporaria">Exportação Temporária</option>
                                        <option value="importacao_definitiva">Importação Definitiva</option>
                                        <option value="importacao_temporaria">Importação Temporária</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="objetivoImportacao" class="form-label">Objetivo da Importação/Exportação</label>
                                    <select class="form-select" id="objetivoImportacao">
                                        <option value="">Selecione...</option>
                                        <option value="comercial">Comercial</option>
                                        <option value="industrial">Industrial</option>
                                        <option value="pessoal">Pessoal</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="tipoCarga" class="form-label">Tipo da Carga</label>
                                    <select class="form-select" id="tipoCarga">
                                        <option value="">Selecione...</option>
                                        <option value="geral">Carga Geral</option>
                                        <option value="granel">Granel</option>
                                        <option value="perigosa">Perigosa</option>
                                        <option value="refrigerada">Refrigerada</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="imoDgr" class="form-label">IMO / DGR</label>
                                    <select class="form-select" id="imoDgr">
                                        <option value="nao">Não</option>
                                        <option value="sim">Sim</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="volume" class="form-label">Volume</label>
                                    <input type="number" class="form-control" id="volume" value="0" step="0.01">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="pesoBruto" class="form-label">Peso Bruto</label>
                                    <input type="number" class="form-control" id="pesoBruto" value="0.00000" step="0.00001">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="valorCif" class="form-label">Valor CIF</label>
                                    <input type="number" class="form-control" id="valorCif" value="0.00" step="0.01">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="valorFrete" class="form-label">Valor Frete</label>
                                    <input type="number" class="form-control" id="valorFrete" value="0.00" step="0.01">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="valorSeguro" class="form-label">Valor Seguro</label>
                                    <input type="number" class="form-control" id="valorSeguro" value="0.00" step="0.01">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="valorFob" class="form-label">Valor Fob</label>
                                    <input type="number" class="form-control" id="valorFob" value="0.00" step="0.01">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="moedaFrete" class="form-label">Moeda Frete</label>
                                    <select class="form-select" id="moedaFrete">
                                        <option value="">Selecione...</option>
                                        <option value="USD">USD - Dólar Americano</option>
                                        <option value="EUR">EUR - Euro</option>
                                        <option value="BRL">BRL - Real Brasileiro</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="moedaSeguro" class="form-label">Moeda Seguro</label>
                                    <select class="form-select" id="moedaSeguro">
                                        <option value="">Selecione...</option>
                                        <option value="USD">USD - Dólar Americano</option>
                                        <option value="EUR">EUR - Euro</option>
                                        <option value="BRL">BRL - Real Brasileiro</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="moedaFob" class="form-label">Moeda FOB</label>
                                    <select class="form-select" id="moedaFob">
                                        <option value="">Selecione...</option>
                                        <option value="USD">USD - Dólar Americano</option>
                                        <option value="EUR">EUR - Euro</option>
                                        <option value="BRL">BRL - Real Brasileiro</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="embalagemMadeira" class="form-label">Embalagem / Suporte de Madeira?</label>
                                    <select class="form-select" id="embalagemMadeira">
                                        <option value="nao">Não</option>
                                        <option value="sim">Sim</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="controleTemperatura" class="form-label">Controle de Temperatura?</label>
                                    <select class="form-select" id="controleTemperatura">
                                        <option value="nao">Não</option>
                                        <option value="sim">Sim</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Adições -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0">Adições</h6>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Regime Aduaneiro</th>
                                        <th>Detalhamento da Carga</th>
                                        <th>Objetivo Imp/Exp</th>
                                        <th>Reimportação</th>
                                        <th>Valor CIF</th>
                                        <th>Moeda</th>
                                        <th>Peso Líquido</th>
                                        <th>Opções</th>
                                    </tr>
                                </thead>
                                <tbody id="adicoesTableBody">
                                    <tr>
                                        <td colspan="9" class="text-center text-muted">Nenhuma adição para a carga</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="alterarStatus">Alterar Status</button>
                <button type="button" class="btn btn-secondary" id="descartarAlteracoes">Descartar Alterações</button>
                <button type="button" class="btn btn-primary" id="salvarProcesso">Salvar</button>
                <div class="ms-auto">
                    <button type="button" class="btn btn-warning" id="solicitarFaturamento">Solicitar Faturamento</button>
                    <button type="button" class="btn btn-dark" id="fichaLote">Ficha Lote</button>
                </div>
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
<script src="{{ url_for('static', filename='js/processos.js') }}"></script>
{% endblock %}
{% endblock %}